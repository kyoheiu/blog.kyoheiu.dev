<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
      <title>tudurikata - CSV parser</title>
        <link>https://tudurikata.com</link>
        <description>personal notes</description>
        <generator>Zola</generator>
        <language>ja</language>
        <atom:link href="https://tudurikata.com/tags/csv-parser/rss.xml" rel="self" type="application/rss+xml"/>
        <lastBuildDate>Wed, 20 Jan 2021 00:00:00 +0000</lastBuildDate>
        <item>
            <title>Parsing CSV file in Nim</title>
            <pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate>
            <link>https://tudurikata.com/post/nim-csv-en/</link>
            <guid>https://tudurikata.com/post/nim-csv-en/</guid>
            <description>&lt;p&gt;As an exercise, I wrote a small program in Nim, the programming language that I&#x27;m learning these days.
Here, we use &lt;code&gt;parsecsv&lt;&#x2F;code&gt; library in standard lib.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;nim&quot; class=&quot;language-nim &quot;&gt;&lt;code class=&quot;language-nim&quot; data-lang=&quot;nim&quot;&gt;import parsecsv

var p: CsvParser
p.open(&amp;quot;sample1.csv&amp;quot;)
p.readHeaderRow()
while p.readRow():
  echo &amp;quot;The average of &amp;quot;, p.row[0], &amp;quot; in &amp;quot;, 
    p.headers[2], &amp;quot; is &amp;quot;, p.row[1]
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;readHeaderRow&lt;&#x2F;code&gt; is a function that gets the first row of csv and makes table (in order to access to elements of the first row, use &lt;code&gt;header[i]&lt;&#x2F;code&gt;.)
&lt;code&gt;readRow&lt;&#x2F;code&gt; sees whether we have next line or not, so we use this function in while expression to work on the entire csv.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;$ nim c -r csvparse.nim
[...]
The average of May in  &amp;quot;2005&amp;quot; is   0.1
The average of Jun in  &amp;quot;2005&amp;quot; is   0.5
The average of Jul in  &amp;quot;2005&amp;quot; is   0.7
The average of Aug in  &amp;quot;2005&amp;quot; is   2.3
The average of Sep in  &amp;quot;2005&amp;quot; is   3.5
The average of Oct in  &amp;quot;2005&amp;quot; is   2.0
The average of Nov in  &amp;quot;2005&amp;quot; is   0.5
The average of Dec in  &amp;quot;2005&amp;quot; is   0.0
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;BTW, first exec time was 0.750s, second 0.013s, due to cache.&lt;&#x2F;p&gt;
&lt;p&gt;Nim shines when we want to build a small but need-to-be-efficient program in daily use, though of course it can be used for more complex applications.&lt;&#x2F;p&gt;
</description>
        </item>
        <item>
            <title>NimでCSVファイルをパースする</title>
            <pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate>
            <link>https://tudurikata.com/post/nim-csv/</link>
            <guid>https://tudurikata.com/post/nim-csv/</guid>
            <description>&lt;p&gt;最近勉強中の言語Nimで、ちょっとした作業用にプログラムを書いてみた。
NimはPython風の文法で簡潔かつコンパクトに高速なプログラムを書ける言語。C &#x2F; C++ &#x2F; Objective-Cのコードにトランスパイルすることができ、Cのライブラリも使用することが可能。&lt;&#x2F;p&gt;
&lt;p&gt;今回触ったのはStandard Libaryのparsecsv。&lt;&#x2F;p&gt;
&lt;pre&gt;&lt;code&gt;import parsecsv

var p: CsvParser
p.open(&amp;quot;sample1.csv&amp;quot;)
p.readHeaderRow()
while p.readRow():
  echo &amp;quot;The average of &amp;quot;, p.row[0], &amp;quot; in &amp;quot;, 
       p.headers[2], &amp;quot; is &amp;quot;, p.row[1]
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;readHeaderRowはcsvの最初の行を読み込んでテーブルを作る関数。最初の行の要素にアクセスしたいときはheaders[i]を使う。
readRowは次の行があるかどうか判定してBoolを返してくれるので、whileの条件に使えばcsv全体に手続きを順に適用できる。&lt;&#x2F;p&gt;
&lt;pre&gt;&lt;code&gt;[kyohei@myarch csvsample]$ nim c -r csvparse.nim
Hint: used config file &amp;#x27;&amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;.choosenim&amp;#x2F;toolchains&amp;#x2F;nim-1.4.2&amp;#x2F;config&amp;#x2F;nim.cfg&amp;#x27; [Conf]
Hint: used config file &amp;#x27;&amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;.choosenim&amp;#x2F;toolchains&amp;#x2F;nim-1.4.2&amp;#x2F;config&amp;#x2F;config.nims&amp;#x27; [Conf]
..............CC: stdlib_assertions.nim
CC: stdlib_io.nim
CC: stdlib_system.nim
CC: stdlib_streams.nim
CC: stdlib_lexbase.nim
CC: stdlib_parsecsv.nim
CC: csvparse.nim
Hint:  [Link]
Hint: 35986 lines; 0.750s; 48.977MiB peakmem; Debug build; proj: &amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;nim&amp;#x2F;csvsample&amp;#x2F;csvparse.nim; out: &amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;nim&amp;#x2F;csvsample&amp;#x2F;csvparse [SuccessX]
Hint: &amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;nim&amp;#x2F;csvsample&amp;#x2F;csvparse  [Exec]
The average of May in  &amp;quot;2005&amp;quot; is   0.1
The average of Jun in  &amp;quot;2005&amp;quot; is   0.5
The average of Jul in  &amp;quot;2005&amp;quot; is   0.7
The average of Aug in  &amp;quot;2005&amp;quot; is   2.3
The average of Sep in  &amp;quot;2005&amp;quot; is   3.5
The average of Oct in  &amp;quot;2005&amp;quot; is   2.0
The average of Nov in  &amp;quot;2005&amp;quot; is   0.5
The average of Dec in  &amp;quot;2005&amp;quot; is   0.0

[kyohei@myarch csvsample]$ nim c -r csvparse.nim
Hint: used config file &amp;#x27;&amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;.choosenim&amp;#x2F;toolchains&amp;#x2F;nim-1.4.2&amp;#x2F;config&amp;#x2F;nim.cfg&amp;#x27; [Conf]
Hint: used config file &amp;#x27;&amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;.choosenim&amp;#x2F;toolchains&amp;#x2F;nim-1.4.2&amp;#x2F;config&amp;#x2F;config.nims&amp;#x27; [Conf]
Hint: 7847 lines; 0.013s; 6.98MiB peakmem; Debug build; proj: &amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;nim&amp;#x2F;csvsample&amp;#x2F;csvparse.nim; out: &amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;nim&amp;#x2F;csvsample&amp;#x2F;csvparse [SuccessX]
Hint: &amp;#x2F;home&amp;#x2F;kyohei&amp;#x2F;nim&amp;#x2F;csvsample&amp;#x2F;csvparse  [Exec]
The average of May in  &amp;quot;2005&amp;quot; is   0.1
The average of Jun in  &amp;quot;2005&amp;quot; is   0.5
The average of Jul in  &amp;quot;2005&amp;quot; is   0.7
The average of Aug in  &amp;quot;2005&amp;quot; is   2.3
The average of Sep in  &amp;quot;2005&amp;quot; is   3.5
The average of Oct in  &amp;quot;2005&amp;quot; is   2.0
The average of Nov in  &amp;quot;2005&amp;quot; is   0.5
The average of Dec in  &amp;quot;2005&amp;quot; is   0.0
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;１回めの実行は0.750sかかっているが、２回めは0.013sと短縮されている。&lt;&#x2F;p&gt;
&lt;p&gt;個人的なNimの使用感としては、わずらわしいこと抜きにさくっとシンプルなプログラムを書きたいときにとても良い感じ（もちろんもっと複雑なプログラムも書けるだろうけれど）。「今時の簡潔言語」の中では一番しっくりきてます。&lt;&#x2F;p&gt;
</description>
        </item>
    </channel>
</rss>
