<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
      <title>tudurikata - parser</title>
        <link>https://tudurikata.com</link>
        <description>personal notes</description>
        <generator>Zola</generator>
        <language>ja</language>
        <atom:link href="https://tudurikata.com/tags/parser/rss.xml" rel="self" type="application/rss+xml"/>
        <lastBuildDate>Tue, 27 Apr 2021 00:00:00 +0000</lastBuildDate>
        <item>
            <title>nmark - a markdown parser written in Nim</title>
            <pubDate>Tue, 27 Apr 2021 00:00:00 +0000</pubDate>
            <link>https://tudurikata.com/post/nmark/</link>
            <guid>https://tudurikata.com/post/nmark/</guid>
            <description>&lt;p&gt;Fast markdown parser, based on CommonMark, written in Nim.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kyoheiu&#x2F;nmark&quot;&gt;kyoheiu&#x2F;nmark&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;usage&quot;&gt;Usage&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;nim&quot; class=&quot;language-nim &quot;&gt;&lt;code class=&quot;language-nim&quot; data-lang=&quot;nim&quot;&gt;import nmark

let txt = &amp;quot;&amp;quot;&amp;quot;
&amp;gt; Lorem ipsum dolor
sit amet.
&amp;gt; - Qui *quodsi iracundia*
&amp;gt; - aliquando id
&amp;quot;&amp;quot;&amp;quot;

echo txt.markdown
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;...and it&#x27;s done.&lt;&#x2F;p&gt;
&lt;pre&gt;&lt;code&gt;# output
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;Lorem ipsum dolor
sit amet.&amp;lt;&amp;#x2F;p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;Qui &amp;lt;em&amp;gt;quodsi iracundia&amp;lt;&amp;#x2F;em&amp;gt;&amp;lt;&amp;#x2F;li&amp;gt;
&amp;lt;li&amp;gt;aliquando id&amp;lt;&amp;#x2F;li&amp;gt;
&amp;lt;&amp;#x2F;ul&amp;gt;
&amp;lt;&amp;#x2F;blockquote&amp;gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can use tables in &lt;code&gt;nmark&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre&gt;&lt;code&gt;| abc | defghi |
:-: | -----------:
bar | baz
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;is converted to:&lt;&#x2F;p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;table&amp;gt;
&amp;lt;thead&amp;gt;
&amp;lt;tr&amp;gt;
&amp;lt;th align=&amp;quot;center&amp;quot;&amp;gt;abc&amp;lt;&amp;#x2F;th&amp;gt;
&amp;lt;th align=&amp;quot;right&amp;quot;&amp;gt;defghi&amp;lt;&amp;#x2F;th&amp;gt;
&amp;lt;&amp;#x2F;tr&amp;gt;
&amp;lt;&amp;#x2F;thead&amp;gt;
&amp;lt;tbody&amp;gt;
&amp;lt;tr&amp;gt;
&amp;lt;td align=&amp;quot;center&amp;quot;&amp;gt;bar&amp;lt;&amp;#x2F;td&amp;gt;
&amp;lt;td align=&amp;quot;right&amp;quot;&amp;gt;baz&amp;lt;&amp;#x2F;td&amp;gt;
&amp;lt;&amp;#x2F;tr&amp;gt;
&amp;lt;&amp;#x2F;tbody&amp;gt;
&amp;lt;&amp;#x2F;table&amp;gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;(Tables need to be separated from other blocks by empty line.)&lt;&#x2F;p&gt;
&lt;h3 id=&quot;performance-comparison&quot;&gt;Performance comparison&lt;&#x2F;h3&gt;
&lt;p&gt;One of the reason I&#x27;m working on this parser is that other markdown parser librarys written in Nim seemed relatively slow. Here is a comparison between &lt;code&gt;nim-markdown&lt;&#x2F;code&gt;, which I think is the standard Nim markdown parser, and &lt;code&gt;nmark&lt;&#x2F;code&gt;, through a static site generator(which, btw, I made) and &lt;code&gt;hyperfine&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;.&#x2F;casa build&lt;&#x2F;code&gt; generates 100 same htmls containing a lot of markdown delimiter. For detail please check my &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kyoheiu&#x2F;Casa&quot;&gt;repo&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;nim-markdown-0-8-5&quot;&gt;nim-markdown@0.8.5 &amp;gt;&amp;gt;&lt;&#x2F;h4&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;left&quot;&gt;Command&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Mean [ms]&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Min [ms]&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Max [ms]&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Relative&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;code&gt;.&#x2F;casa build&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;296.1 ± 12.2&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;287.6&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;322.4&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;1.00&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
&lt;h4 id=&quot;nmark-0-1-3&quot;&gt;nmark@0.1.3 &amp;gt;&amp;gt;&lt;&#x2F;h4&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;left&quot;&gt;Command&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Mean [ms]&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Min [ms]&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Max [ms]&lt;&#x2F;th&gt;&lt;th align=&quot;right&quot;&gt;Relative&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;code&gt;.&#x2F;casa build&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;53.1 ± 7.0&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;51.2&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;91.7&lt;&#x2F;td&gt;&lt;td align=&quot;right&quot;&gt;1.00&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
&lt;h3 id=&quot;caution&quot;&gt;Caution&lt;&#x2F;h3&gt;
&lt;p&gt;This is still work-in-progess project, and does not FULLY pass the &lt;a href=&quot;https:&#x2F;&#x2F;spec.commonmark.org&#x2F;0.29&#x2F;&quot;&gt;spec-test of CommonMark&lt;&#x2F;a&gt;. For example,&lt;&#x2F;p&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; foo
bar
===
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;... is, by &lt;code&gt;nmark&lt;&#x2F;code&gt;, converted to:&lt;&#x2F;p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;blockquote&amp;gt;
&amp;lt;h1&amp;gt;foo
bar&amp;lt;&amp;#x2F;h1&amp;gt;
&amp;lt;&amp;#x2F;blockquote&amp;gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Though I believe &lt;code&gt;nmark&lt;&#x2F;code&gt; is enough for normal usage, I&#x27;m working on improving the accuracy and performance. And issues, pull requests always welcome.&lt;&#x2F;p&gt;
</description>
        </item>
    </channel>
</rss>
