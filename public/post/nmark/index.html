<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  
<title>nmark - a markdown parser written in Nim | kyoheiu.gitlab.io</title>


  <link rel="shortcut icon" type="image/png" href="&#x2F;images&#x2F;icon.png">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link id="stylesheet" rel="stylesheet" type="text/css" href="/dark.css">

  <script type="text/javascript" src="/js/theme.js"></script>

</head>

<div class="header">
  <div class="site_title">
    <p><a href="/"><img src="https:&#x2F;&#x2F;kyoheiu.gitlab.io&#x2F;images&#x2F;icon.png" alt="kyoheiu.gitlab.io"
          width="70" height=auto></a></p>
    <p><a href="/">&nbsp;kyoheiu.gitlab.io</a></p>
  </div>
  <div class="menu">
    <a href="/post">>archives</a>
    &nbsp;<a href="/about">>about</a>
  </div>
</div>

<body onload="getTheme()">
  <section class="section">
    <div class="container">
      
<p>
  <div class="title_postpage">nmark - a markdown parser written in Nim</div>
</p>
<p>
  <div class="date_postpage">2021-04-27</div>
  <div class="taxonomies_postpage">
  
      
      <a href="https://kyoheiu.gitlab.io/categories/code/">/code</a>
      
  
  
      
      &emsp;<a href="https://kyoheiu.gitlab.io/tags/nim/">#Nim</a>
      
      &emsp;<a href="https://kyoheiu.gitlab.io/tags/markdown/">#markdown</a>
      
      &emsp;<a href="https://kyoheiu.gitlab.io/tags/commonmark/">#CommonMark</a>
      
      &emsp;<a href="https://kyoheiu.gitlab.io/tags/parser/">#parser</a>
      
  
  </div>
</p>

<p>
  <p>Fast markdown parser, based on CommonMark, written in Nim.</p>
<p><a href="https://github.com/kyoheiu/nmark">kyoheiu/nmark</a></p>
<h3 id="usage">Usage</h3>
<pre data-lang="nim" class="language-nim "><code class="language-nim" data-lang="nim">import nmark

let txt = &quot;&quot;&quot;
&gt; Lorem ipsum dolor
sit amet.
&gt; - Qui *quodsi iracundia*
&gt; - aliquando id
&quot;&quot;&quot;

echo txt.markdown
</code></pre>
<p>...and it's done.</p>
<pre><code># output
&lt;blockquote&gt;
&lt;p&gt;Lorem ipsum dolor
sit amet.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Qui &lt;em&gt;quodsi iracundia&lt;&#x2F;em&gt;&lt;&#x2F;li&gt;
&lt;li&gt;aliquando id&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;blockquote&gt;
</code></pre>
<p>You can use tables in <code>nmark</code>.</p>
<pre><code>| abc | defghi |
:-: | -----------:
bar | baz
</code></pre>
<p>is converted to:</p>
<pre><code>&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;abc&lt;&#x2F;th&gt;
&lt;th align=&quot;right&quot;&gt;defghi&lt;&#x2F;th&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;bar&lt;&#x2F;td&gt;
&lt;td align=&quot;right&quot;&gt;baz&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;
&lt;&#x2F;table&gt;
</code></pre>
<p>(Tables need to be separated from other blocks by empty line.)</p>
<h3 id="performance-comparison">Performance comparison</h3>
<p>One of the reason I'm working on this parser is that other markdown parser librarys written in Nim seemed relatively slow. Here is a comparison between <code>nim-markdown</code>, which I think is the standard Nim markdown parser, and <code>nmark</code>, through a static site generator(which, btw, I made) and <code>hyperfine</code>.</p>
<p><code>./casa build</code> generates 100 same htmls containing a lot of markdown delimiter. For detail please check my <a href="https://github.com/kyoheiu/Casa">repo</a>.</p>
<h4 id="nim-markdown-0-8-5">nim-markdown@0.8.5 &gt;&gt;</h4>
<table><thead><tr><th align="left">Command</th><th align="right">Mean [ms]</th><th align="right">Min [ms]</th><th align="right">Max [ms]</th><th align="right">Relative</th></tr></thead><tbody>
<tr><td align="left"><code>./casa build</code></td><td align="right">296.1 ± 12.2</td><td align="right">287.6</td><td align="right">322.4</td><td align="right">1.00</td></tr>
</tbody></table>
<h4 id="nmark-0-1-3">nmark@0.1.3 &gt;&gt;</h4>
<table><thead><tr><th align="left">Command</th><th align="right">Mean [ms]</th><th align="right">Min [ms]</th><th align="right">Max [ms]</th><th align="right">Relative</th></tr></thead><tbody>
<tr><td align="left"><code>./casa build</code></td><td align="right">53.1 ± 7.0</td><td align="right">51.2</td><td align="right">91.7</td><td align="right">1.00</td></tr>
</tbody></table>
<h3 id="caution">Caution</h3>
<p>This is still work-in-progess project, and does not FULLY pass the <a href="https://spec.commonmark.org/0.29/">spec-test of CommonMark</a>. For example,</p>
<pre><code>&gt; foo
bar
===
</code></pre>
<p>... is, by <code>nmark</code>, converted to:</p>
<pre><code>&lt;blockquote&gt;
&lt;h1&gt;foo
bar&lt;&#x2F;h1&gt;
&lt;&#x2F;blockquote&gt;
</code></pre>
<p>Though I believe <code>nmark</code> is enough for normal usage, I'm working on improving the accuracy and performance. And issues, pull requests always welcome.</p>

</p>




    </div>
  </section>
</body>

<div class="footer">
  <a href="/">kyoheiu.gitlab.io</a>&emsp;&copy; Kyohei Uto<br>
  powered by <a href="https://www.getzola.org/">Zola</a>, theme <a
    href="https://github.com/kyoheiu/emily_zola_theme">emily</a>.
</div>

</html>
