<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  
<title>Parsing CSV file in Nim | kyoheiu.gitlab.io</title>


  <link rel="shortcut icon" type="image/png" href="&#x2F;images&#x2F;icon.png">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link id="stylesheet" rel="stylesheet" type="text/css" href="/dark.css">

  <script type="text/javascript" src="/js/theme.js"></script>

</head>

<div class="header">
  <div class="site_title">
    <p><a href="/"><img src="https:&#x2F;&#x2F;kyoheiu.gitlab.io&#x2F;images&#x2F;icon.png" alt="kyoheiu.gitlab.io"
          width="70" height=auto></a></p>
    <p><a href="/">&nbsp;kyoheiu.gitlab.io</a></p>
  </div>
  <div class="menu">
    <a href="/post">>archives</a>
    &nbsp;<a href="/about">>about</a>
  </div>
</div>

<body onload="getTheme()">
  <section class="section">
    <div class="container">
      
<p>
  <div class="title_postpage">Parsing CSV file in Nim</div>
</p>
<p>
  <div class="date_postpage">2021-01-20</div>
  <div class="taxonomies_postpage">
  
      
      <a href="https://kyoheiu.gitlab.io/categories/code/">/code</a>
      
  
  
      
      &emsp;<a href="https://kyoheiu.gitlab.io/tags/nim/">#Nim</a>
      
      &emsp;<a href="https://kyoheiu.gitlab.io/tags/csv-parser/">#CSV parser</a>
      
  
  </div>
</p>

<p>
  <p>As an exercise, I wrote a small program in Nim, the programming language that I'm learning these days.
Here, we use <code>parsecsv</code> library in standard lib.</p>
<pre data-lang="nim" class="language-nim "><code class="language-nim" data-lang="nim">import parsecsv

var p: CsvParser
p.open(&quot;sample1.csv&quot;)
p.readHeaderRow()
while p.readRow():
  echo &quot;The average of &quot;, p.row[0], &quot; in &quot;, 
    p.headers[2], &quot; is &quot;, p.row[1]
</code></pre>
<p><code>readHeaderRow</code> is a function that gets the first row of csv and makes table (in order to access to elements of the first row, use <code>header[i]</code>.)
<code>readRow</code> sees whether we have next line or not, so we use this function in while expression to work on the entire csv.</p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">$ nim c -r csvparse.nim
[...]
The average of May in  &quot;2005&quot; is   0.1
The average of Jun in  &quot;2005&quot; is   0.5
The average of Jul in  &quot;2005&quot; is   0.7
The average of Aug in  &quot;2005&quot; is   2.3
The average of Sep in  &quot;2005&quot; is   3.5
The average of Oct in  &quot;2005&quot; is   2.0
The average of Nov in  &quot;2005&quot; is   0.5
The average of Dec in  &quot;2005&quot; is   0.0
</code></pre>
<p>BTW, first exec time was 0.750s, second 0.013s, due to cache.</p>
<p>Nim shines when we want to build a small but need-to-be-efficient program in daily use, though of course it can be used for more complex applications.</p>

</p>




    </div>
  </section>
</body>

<div class="footer">
  <a href="/">kyoheiu.gitlab.io</a>&emsp;&copy; Kyohei Uto<br>
  powered by <a href="https://www.getzola.org/">Zola</a>, theme <a
    href="https://github.com/kyoheiu/emily_zola_theme">emily</a>.
</div>

</html>
